## Linux学习笔记 文件与目录管理
---
### 1. 绝对路径和相对路径

+ 绝对路径：从根目录开头的路径，例如：`/usr/share/doc`
+ 相对路径：不是由根开头的路径，例如：`../home` 或者 `home`

---
### 2. 几个特殊的目录

+ `.` ：代表此层目录
+ `..` ：代表上层目录
+ `-` ：代表前一个工作目录
+ `~` ：代表当前用户的家目录
+ `~account` ：代表account这个用户的家目录

---
### 3. 文件的时间属性

+ 修改时间（mtime）：当文件的内容变更时，就会更新此时间
+ 状态时间（ctime）：当文件的属性变更时，就会更新此时间
+ 读取时间（atime）：当该文件的内容被读取、访问时，就会更新此时间。  

    注意：`ls` 默认显示的是文件的mtime

---
### 4. 文件的隐藏属性（除去之前的9大属性）

&emsp;&emsp;具有以下隐藏属性就会获得相应功能，可以通过 `chattr` 命令设置， `lsattr` 命令查看：
+ A：即Atime，告诉系统不要修改对这个文件的最后访问时间
+ S：即Sync，一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘
+ a：即Append Only，系统只允许在这个文件之后追加数据，不允许任何进程覆盖或截断这个文件。如果目录具有这个属性，系统将只允许在这个目录下建立和修改文件，而不允许删除任何文件
+ b：不更新文件或目录的最后存取时间
+ c：将文件或目录压缩后存放
+ d：当dump程序执行时，该文件或目录不会被dump备份
+ D:检查压缩文件中的错误
+ i：即Immutable，系统不允许对这个文件进行任何的修改。如果目录具有这个属性，那么任何的进程只能修改目录之下的文件，不允许建立和删除文件
+ s：彻底删除文件，不可恢复，因为是从磁盘上删除，然后用0填充文件所在区域
+ u：当一个应用程序请求删除这个文件，系统会保留其数据块以便以后能够恢复删除这个文件，用来防止意外删除文件或目录
+ t:文件系统支持尾部合并（tail-merging）
+ X：可以直接访问压缩文件的内容

---
### 5. 目录相关命令

1. 切换目录：  
    ```
    # cd [相对路径或绝对路径]
    ```

2. 显示当前所在目录：  
    ```
    # pwd [-P]
    ```
    参数说明：
    + -P ：显示真正的路径，而非链接路径

3. 创建目录：  
    ```
    # mkdir [-mp] 目录名称
    ```
    参数说明：
    + -m ：设置权限，不使用默认权限。后面跟权限数字（3或4位）
    + -p ：递归创建目录

4. 删除空目录：  
    ```
    # rmdir [-p] 目录名称
    ```
    参数说明：
    + -p ：递归删除空目录

    注：一定得是空目录才能删除

---
### 6. 文件与目录共用命令

1. 显示目录或文件名称、属性：  
    ```
    # ls [-aldrtRSinh] [--time={atime,ctime}] [--full-time] [name...]
    ```
    参数说明：
    + -a ：* 显示所有文件，包括隐藏文件
    + -l ：* 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出
    + -d ：仅列出目录本身，不列出目录内的文件列表
    + -r ：将结果反向输出
    + -t ：依照时间排序，而不是文件名
    + -R ：* 连同子目录下的所有内容一起列出，递归列出
    + -S ：依照容量大小排序，而不是文件名
    + -i ：列出inode号码
    + -n ：列出UID和GID而非用户名和用户组名
    + -h ：* 文件容量以易读的方式列出
    + --time ：时间输出改为atime或者ctime
    + --full-time ：显示完整的时间信息，包括年月日时分

    注：可以使用 `ll` 命令来代替 `ls -l` 。

2. 复制：  
    ```
    # cp [-adfilprse] [--preserve=all] source dest
    # cp [options] source... directory
    ```
    参数说明：
    + -a ：* 相当于-dr --preserve=all。既保持所有属性以及链接文件，递归复制
    + -d ：保留链接文件
    + -f ：* 强制，覆盖已经存在的目标文件
    + -i ：在覆盖目标文件之前给出提示，询问用户确认是否覆盖
    + -l ：* 创建硬链接，而非复制文件
    + -p ：保持所有基本属性
    + -r ：递归复制
    + -s ：* 创建软链接，而非复制文件
    + -u ：更新文件，只有目标文件比源文件旧或者不存在才复制
    + --preserve=all ：保持所有属性，除了-p的基本属性还有其他属性

    注：cp命令默认条件下，相当于创建了一个新文件，文件的所有属性为操作命令用户创建文件的默认属性。只不过文件内容和源文件一样。

3. 删除：  
    ```
    # rm [-fir] name...
    ```
    参数说明：
    + -i ：删除前逐一询问确认
    + -f ：强制，即使原档案属性设为唯读或不存在，无需逐一确认
    + -r ：递归删除

4. 移动（重命名）：  
    ```
    # mv [-fiu] source dest
    # mv [options] source... directory
    ```
    参数说明：
    + -f ：强制，如果目标存在直接覆盖
    + -i ：若指定目录已有同名文件，则先询问是否覆盖旧文件
    + -u ：更新，如果目标存在，且比旧文件新则覆盖

    注：可以使用该命令来进行重命名操作。

5. 获取某路径的文件名和目录名：
    ```
    # basename 路径
    # dirname 路径
    ```
    第一个命令获取文件名  
    第二个命令获取目录名

6. 修改文件或目录时间（或创建文件）：
    ```
    # touch [-acm][-d<日期时间>][-r<参考文件或目录>] [-t<日期时间>] [文件或目录…]
    ```
    默认情况下文件不存在则创建文件，文件存在则修改所有3个时间为当前时间。  
    参数说明：
    + -a ：仅仅修改atime，ctime也会随之改变
    + -m ：仅仅修改mtime
    + -c ：如果目标文件不存在，不会创建新文件，默认会创建新文件
    + -r ：使用参考文件的时间记录
    + -d ：不使用当前时间，设定时间与日期，可以使用各种不同的格式
    + -t ：不使用当前时间，设定时间与日期，格式[YYYYMMDDhhmm]

7. 隐藏属性修改：
    ```
    # chattr [+-=][隐藏属性组合] 文件或目录…
    ```
    参数说明：
    + +<属性> ：开启文件或目录的该项属性
    + -<属性> ：关闭文件或目录的该项属性
    + =<属性> ：指定文件或目录的该项属性

8. 查看隐藏属性：  
    ```
    # lsattr [-adR] 文件或目录…
    ```
    参数说明：
    + -a ：列出全部文件，包括隐藏文件
    + -d ：仅列出目录本身，而不列出目录内的文件
    + -R ：递归列出子目录等所有文件

---
### 7.文件相关命令

1. 从第一行开始显示文件内容：  
    ```
    # cat [-AbeEnstTv] fileName
    ```
    参数说明：
    + -n ：* 由 1 开始对所有输出的行数编号
    + -b ：和 -n 相似，只不过对于空白行不编号
    + -s ：当遇到有连续两行以上的空白行，就代换为一行的空白行
    + -v ：使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外
    + -E : 在每行结束处显示 $
    + -T : 将 TAB 字符显示为 ^I
    + -A ：等价于 -vET
    + -e ：等价于"-vE"选项
    + -t ：等价于"-vT"选项

2. 从最后一行开始显示文件内容：  
    ```
    # tac fileName
    ```

3. 用行号的方式显示文件内容：  
    ```
    # nl [-bnw] fileName
    ```
    参数说明：
    + -b ：指定行号指定的方式，主要有两种：
        + -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)
        + -b t ：如果有空行，空的那一行不要列出行号(默认值)
    + -n  ：列出行号表示的方法，主要有三种：
        + -n ln ：行号在萤幕的最左方显示
        + -n rn ：行号在自己栏位的最右方显示，且不加 0 
        + -n rz ：行号在自己栏位的最右方显示，且加 0 
    + -w  ：行号栏位的占用的位数

4. 可向后翻页显示文件内容：  
    ```
    # more fileName
    ```

5. 可前后翻译显示文件内容：  
    ```
    # less fileName
    ```

6. 显示前几行文件内容：  
    ```
    # head [-n number] fileName
    ```
    参数说明：
    + -n number ：代表显示几行，number是一个数字

7. 显示后几行文件内容：  
    ```
    # tail [-n number] [-f] fileName
    ```
    参数说明：
    + -n number ：代表显示几行，number是一个数字
    + -f ：持续刷新文件内容，直到强制退出该程序

8. 显示二进制文件内容：  
    ```
    # od [-A 地址进制] [-t 显示格式] fileName
    ```
    参数说明：
    + -A ：指定地址信息的的进制格式：
        + o：八进制（系统默认值）
        + d：十进制
        + x：十六进制
        + n：不打印位移值
    + -t ：指定数据显示的格式：
        + c：ASCII字符或反斜杠序列(如\n)
        + d：有符号十进制数
        + f：浮点数
        + o：八进制（系统默认值）
        + u：无符号十进制数
        + x：十六进制数

9. 查看文件类型：
    ```
    # file fileName
    ```
    可以查看文件是ASCII文本文件还是二进制文件。


---
#### [返回目录](./)