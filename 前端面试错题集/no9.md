## 前端面试错题集 闭包

---

### 1、概念
闭包函数：声明在一个函数中的函数，叫做闭包函数。

闭包：内部函数总是可以访问其外部声明的参数和变量，即使在其外部函数被返回（寿命终结）了之后。

**存在自由变量的函数就是闭包。**

自由变量：不属于函数自身声明和定义的变量

「约束变量」里的「约束」，在 js 里是指是否受到当下的函数作用域约束。

### 2、特点
  让外部访问函数内部变量成为可能；

  局部变量会常驻在内存中；

  可以避免使用全局变量，防止全局变量污染；

  会造成内存泄漏（有一块内存空间被长期占用，而不被释放）

### 3、闭包的创建：­­­
闭包就是可以创建一个独立的环境，每个闭包里面的环境都是独立的，互不干扰。闭包会发生内存泄漏，每次外部函数执行的时 候，外部函数的引用地址不同，都会重新创建一个新的地址。但凡是当前活动对象中有被内部子集引用的数据，那么这个时候，这个数据不删除，保留一根指针给内部活动对象。

闭包内存泄漏为： key = value，key 被删除了 value 常驻内存中; 局部变量闭包升级版（中间引用的变量） => 自由变量；



经典例题：

链接：https://www.nowcoder.com/questionTerminal/ca2472f3581c467fb81a7a77b47ab740
来源：牛客网

```
function Foo() {
    var i = 0;
    return function() {
        console.log(i++);
    }
}

var f1 = Foo(),
    f2 = Foo(); //第二个重新执行了一次Foo函数，那么i是一个新的变量被引用
f1();	//0
f1();	//1
f2();	//0

```



---

#### [返回目录](./)



